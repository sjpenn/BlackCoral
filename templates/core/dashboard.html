{% extends 'base.html' %}

{% block title %}Dashboard - BLACK CORAL{% endblock %}

{% block content %}
<div class="dashboard" x-data="{ activeWidget: 'overview' }">
    <h2>Dashboard</h2>
    <p>Welcome to BLACK CORAL, {{ user.first_name|default:user.username }}!</p>
    
    <!-- Role-specific widgets -->
    <div class="widgets" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-top: 2rem;">
        
        <!-- Overview Widget -->
        <div class="widget" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h3>System Overview</h3>
            <p>BLACK CORAL Status: <span style="color: green;">Active</span></p>
            <p>Your Role: <strong>{{ user.get_role_display }}</strong></p>
            <p>Last Login: {{ user.last_login|date:"M d, Y H:i" }}</p>
        </div>

        {% if user.can_research_opportunities %}
        <!-- Research Widget -->
        <div class="widget" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h3>Opportunities</h3>
            <p>New opportunities: <strong>0</strong></p>
            <p>In review: <strong>0</strong></p>
            <a href="{% url 'opportunities:list' %}" class="btn btn-primary">Search Opportunities</a>
        </div>
        {% endif %}

        {% if user.can_review_content %}
        <!-- Review Widget -->
        <div class="widget" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h3>Reviews Pending</h3>
            <p>Documents awaiting review: <strong>0</strong></p>
            <p>Priority items: <strong>0</strong></p>
            <a href="{% url 'documents:list' %}" class="btn btn-primary">Review Queue</a>
        </div>
        {% endif %}

        {% if user.can_monitor_compliance %}
        <!-- Compliance Widget -->
        <div class="widget" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h3>Compliance Status</h3>
            <p>Active alerts: <strong>0</strong></p>
            <p>Recent violations: <strong>0</strong></p>
            <a href="{% url 'compliance:dashboard' %}" class="btn btn-primary">Compliance Dashboard</a>
        </div>
        {% endif %}

        {% if user.can_submit_proposals %}
        <!-- Submission Widget -->
        <div class="widget" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h3>Submissions</h3>
            <p>Ready for submission: <strong>0</strong></p>
            <p>Pending deadlines: <strong>0</strong></p>
            <a href="#" class="btn btn-primary">Submission Queue</a>
        </div>
        {% endif %}

        {% if user.can_manage_users %}
        <!-- Admin Widget -->
        <div class="widget" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h3>Administration</h3>
            <p>Active users: <strong>1</strong></p>
            <p>System health: <strong>Good</strong></p>
            <a href="/admin/" class="btn btn-primary">Admin Panel</a>
        </div>
        {% endif %}
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions" style="margin-top: 2rem;">
        <h3>Quick Actions</h3>
        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
            <a href="{% url 'opportunities:list' %}" class="btn btn-primary">New Search</a>
            <a href="{% url 'ai_integration:dashboard' %}" class="btn btn-primary">AI Summary</a>
            <button class="btn btn-primary" onclick="alert('Feature coming in Phase 4')">Create Proposal</button>
        </div>
    </div>
</div>
{% endblock %}